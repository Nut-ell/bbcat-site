<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BBCAT — Pixel Cat Landing</title>
  <style>
    body { margin:0; background:#0f1115; display:grid; place-items:center; height:100vh; color:#e6e9ef; font-family:monospace; overflow:hidden; }
    canvas { image-rendering: pixelated; background:transparent; }
    .message, .redirect { position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); text-align:center; }
    .message h1 { color:#f5c518; font-size:2rem; text-shadow:0 0 20px rgba(245,197,24,.5); }
    .message p { color:#9aa4b2; }
    .redirect { opacity:0; transition:opacity 1s ease-in; }
    .redirect.show { opacity:1; }
    .redirect-text { color:#eb6f92; animation: blink 1s step-start infinite; }
    @keyframes blink { 0%,50%{opacity:1;} 51%,100%{opacity:0.7;} }
    .skip { position: absolute; bottom: 18px; right: 18px; opacity:.75; font-size:.9rem; }
  </style>
</head>
<body>
  <canvas id="game" width="400" height="400"></canvas>
  <div class="message" id="message">
    <h1>BBCAT</h1>
    <p>Make big data purr.</p>
  </div>
  <div class="redirect" id="redirect">
    <div class="redirect-text">redirecting...</div>
  </div>
  <div class="skip" id="skip">click to skip →</div>
  <script>
    // ==== Redirect destination (updated) ====
    const REDIRECT_URL = 'https://nut-ell.github.io/crypto-dataviz/';

    // Safety: even if animation never ends, redirect after MAX_WAIT_MS.
    const MAX_WAIT_MS = 12000; // 12s fallback
    setTimeout(() => location.href = REDIRECT_URL, MAX_WAIT_MS);
    document.getElementById('skip').onclick = () => location.href = REDIRECT_URL;
    window.addEventListener('keydown', () => location.href = REDIRECT_URL);

    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const SIZE = 20, COLS = 20, ROWS = 20;
    const CAT_PATTERN = [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,1,1,2,2,1,1,1,1,1,1,2,2,1,1,0,0,0],[0,0,0,1,1,2,2,1,1,1,1,1,1,2,2,1,1,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,1,1,1,1,1,1,3,3,1,1,1,1,1,1,0,0,0],[0,0,0,1,1,1,1,1,1,3,3,1,1,1,1,1,1,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];
    const COLORS = {0: 'transparent', 1: '#1a1a1a', 2: '#f5c518', 3: '#eb6f92'};
    const blocks = [];

    class Block {
      constructor(x,y,targetY,color,delay){
        this.x=x;this.y=y;this.targetY=targetY;this.color=color;this.delay=delay;this.speed=3+Math.random()*2;this.landed=false;
      }
      update(){ if(this.delay>0){this.delay--;return;} if(!this.landed){ this.y+=this.speed; if(this.y>=this.targetY){ this.y=this.targetY; this.landed=true; } } }
      draw(){ if(this.delay>0) return; ctx.fillStyle=this.color; ctx.fillRect(this.x*SIZE,this.y*SIZE,SIZE-1,SIZE-1); ctx.fillStyle='rgba(255,255,255,.1)'; ctx.fillRect(this.x*SIZE,this.y*SIZE,SIZE-1,2); }
    }

    function initBlocks(){
      blocks.length=0; let idx=0;
      for(let r=0;r<ROWS;r++){
        for(let c=0;c<COLS;c++){
          if(CAT_PATTERN[r][c]!==0){
            const color=COLORS[CAT_PATTERN[r][c]];
            const delay=Math.random()*30 + idx*1; // faster finish
            const startY=-Math.random()*6 - 3;
            blocks.push(new Block(c,startY,r,color,delay)); idx++;
          }
        }
      }
    }

    function animate(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      let allLanded=true;
      for(const b of blocks){ b.update(); b.draw(); if(!b.landed) allLanded=false; }
      if(allLanded){
        setTimeout(()=>{
          document.getElementById('message').style.opacity=1;
          setTimeout(()=>{
            document.getElementById('message').style.opacity=0;
            document.getElementById('redirect').classList.add('show');
            setTimeout(()=>{ location.href = REDIRECT_URL; }, 1200);
          }, 1200);
        }, 400);
      } else {
        requestAnimationFrame(animate);
      }
    }

    initBlocks();
    animate();
  </script>
</body>
</html>

